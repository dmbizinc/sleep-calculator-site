function calculateBedTimes() {
  const input = document.getElementById("wakeTime").value;
  if (!input) return;

  const [h, m] = input.split(":").map(Number);
  const wakeTime = new Date();
  wakeTime.setHours(h, m, 0, 0);

  const results = [];
  for (let i = 6; i >= 1; i--) {
    const d = new Date(wakeTime.getTime() - i * 90 * 60000);
    const diffMins = (wakeTime - d) / 60000;
    results.push({ time: formatTime(d), diffMins, rank: i });
  }

  // Find closest to 420 minutes (7 hours)
  const recommended = results.reduce((prev, curr) => {
    return Math.abs(curr.diffMins - 420) < Math.abs(prev.diffMins - 420) ? curr : prev;
  });

  document.getElementById("bedResults").innerHTML =
    `<p>If you want to wake up at <strong>${formatTime(wakeTime)}</strong>, try falling asleep at one of these times:</p>
     <ul class="list-disc ml-5 mt-2">
      ${results.map(r => {
        const isRecommended = r.time === recommended.time;
        return `<li class="${isRecommended ? 'font-bold text-blue-600' : ''}">
                  ${r.time}${isRecommended ? ' ⭐ Recommended' : ''}
                </li>`;
      }).join('')}
    </ul>`;
}

function calculateWakeTimes() {
  const input = document.getElementById("bedTime").value;
  if (!input) return;

  const [h, m] = input.split(":").map(Number);
  const bedTime = new Date();
  bedTime.setHours(h, m, 0, 0);

  const results = [];
  for (let i = 1; i <= 6; i++) {
    const d = new Date(bedTime.getTime() + i * 90 * 60000);
    const diffMins = (d - bedTime) / 60000;
    results.push({ time: formatTime(d), diffMins, rank: i });
  }

  // Find closest to 420 minutes (7 hours)
  const recommended = results.reduce((prev, curr) => {
    return Math.abs(curr.diffMins - 420) < Math.abs(prev.diffMins - 420) ? curr : prev;
  });

  document.getElementById("wakeResults").innerHTML =
    `<p>If you go to bed at <strong>${formatTime(bedTime)}</strong>, try waking up at one of these times:</p>
     <ul class="list-disc ml-5 mt-2">
      ${results.map(r => {
        const isRecommended = r.time === recommended.time;
        return `<li class="${isRecommended ? 'font-bold text-green-600' : ''}">
                  ${r.time}${isRecommended ? ' ⭐ Recommended' : ''}
                </li>`;
      }).join('')}
    </ul>`;
}
